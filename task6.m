a = [1 2 -1; 2 -3 2; 3 1 1];
b = [2 2 8];

% step 1
k12 = a(2, 1)/a(1, 1);
a(2, :) = a(2, :) - a(1, :) * k12;
b(2) = b(2) - b(1) * k12;

k13 = a(3, 1)/a(1, 1);
a(3, :) = a(3, :) - a(1, :) * k13;
b(3) = b(3) - b(1) * k13;

% step 2
k23 = a(3, 2)/a(2, 2);
a(3, 2:3) = a(3, 2:3) - a(2, 2:3) * k23;
b(3) = b(3) - b(2) * k23;

% get results
z = b(3)/a(3,3);
y = (b(2) - z*a(2,3))/a(2, 2);
x = (b(1) - z*a(1,3) - y*a(1,2))/a(1, 1);

fprintf('x = %.d\ny = %.d\nz = %.d\n', x, y, z)


